<!DOCTYPE html>
<html class="light" lang="id">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>SmartStock - Kelola Data</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <style>
        .material-symbols-outlined {
            font-variation-settings:
                'FILL' 1,
                'wght' 400,
                'GRAD' 0,
                'opsz' 24
        }
    </style>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#005A9C",
                        "secondary": "#FF6F61",
                        "background-light": "#F8F9FA",
                        "background-dark": "#0a1217",
                        "text-light": "#343A40",
                        "text-dark": "#e0e6eb",
                        "subtle-light": "#e9ecef",
                        "subtle-dark": "#1f2937",
                        "subtle-text-light": "#6c757d",
                        "subtle-text-dark": "#9ca3af",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: { "DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px" },
                },
            },
        }
    </script>
</head>
<body class="font-display bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark">
    <div class="relative flex h-auto min-h-screen w-full flex-col group/design-root overflow-x-hidden">
        <div class="flex h-full grow flex-row">
            <aside class="flex h-screen min-h-[700px] flex-col justify-between border-r border-subtle-light dark:border-subtle-dark bg-white dark:bg-background-dark p-4 w-64 fixed left-0 top-0">
                <div class="flex flex-col gap-8">
                    <div class="flex items-center gap-3 px-2">
                        <div class="size-6 text-primary">
                            <svg fill="currentColor" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                                <path d="M24 4C26.1564 4 27.9101 4.88725 29.284 6.26115L35.9751 12.9523C38.0463 15.0234 38.0463 18.3371 35.9751 20.4082L29.284 27.0994C27.9101 28.4733 26.1564 29.3605 24 29.3605L24 4ZM24 44H6V30.6667V17.3333H24V44Z" fill="#005A9C"></path>
                                <path d="M24 4H42V17.3333V30.6667H24V4Z" fill="#005A9C" fill-opacity="0.3"></path>
                            </svg>
                        </div>
                        <h1 class="text-lg font-bold leading-normal text-text-light dark:text-text-dark">SmartStock</h1>
                    </div>
                    <nav class="flex flex-col gap-2">
                        <a class="flex items-center gap-3 px-3 py-2 rounded-lg text-subtle-text-light dark:text-subtle-text-dark hover:bg-subtle-light dark:hover:bg-subtle-dark hover:text-text-light dark:hover:text-text-dark transition-colors duration-200" href="/beranda">
                            <span class="material-symbols-outlined text-lg">grid_view</span>
                            <p class="text-sm font-medium">Dasbor</p>
                        </a>
                        <a class="flex items-center gap-3 px-3 py-2 rounded-lg text-subtle-text-light dark:text-subtle-text-dark hover:bg-subtle-light dark:hover:bg-subtle-dark hover:text-text-light dark:hover:text-text-dark transition-colors duration-200" href="/grafik">
                            <span class="material-symbols-outlined text-lg font-normal fill-0">monitoring</span>
                            <p class="text-sm font-medium">Grafik Historis</p>
                        </a>
                        <a class="flex items-center gap-3 px-3 py-2 rounded-lg text-subtle-text-light dark:text-subtle-text-dark hover:bg-subtle-light dark:hover:bg-subtle-dark hover:text-text-light dark:hover:text-text-dark transition-colors duration-200" href="/prediksi">
                            <span class="material-symbols-outlined text-lg font-normal fill-0">trending_up</span>
                            <p class="text-sm font-medium">Prediksi Stok</p>
                        </a>
                        <a class="flex items-center gap-3 px-3 py-2 rounded-lg bg-primary/10 dark:bg-primary/20 text-primary" href="/manajemen_kapal">
                            <span class="material-symbols-outlined text-lg font-normal fill-0">database</span>
                            <p class="text-sm font-bold">Kelola Data</p>
                        </a>
                        <a class="flex items-center gap-3 px-3 py-2 rounded-lg text-subtle-text-light dark:text-subtle-text-dark hover:bg-subtle-light dark:hover:bg-subtle-dark hover:text-text-light dark:hover:text-text-dark transition-colors duration-200" href="/about">
                            <span class="material-symbols-outlined text-lg font-normal fill-0">info</span>
                            <p class="text-sm font-medium">Tentang Kami</p>
                        </a>
                    </nav>
                </div>
                <div class="flex flex-col gap-2">
                </div>
            </aside>
            <main class="flex-1 ml-64">
                <header class="flex items-center justify-end whitespace-nowrap border-b border-solid border-subtle-light dark:border-subtle-dark px-10 py-4 sticky top-0 bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-sm z-10">
                    <div class="flex items-center gap-4">
                        <button aria-label="Toggle dark mode" class="flex items-center justify-center size-8 rounded-full text-subtle-text-light dark:text-subtle-text-dark hover:bg-subtle-light dark:hover:bg-subtle-dark transition-colors" onclick="document.documentElement.classList.toggle('dark')">
                            <span class="material-symbols-outlined text-xl block dark:hidden">dark_mode</span>
                            <span class="material-symbols-outlined text-xl hidden dark:block">light_mode</span>
                        </button>
                    </div>
                </header>

                <div class="p-4 sm:p-6 md:p-8">

                    <div class="max-w-7xl mx-auto">

                        {% with messages = get_flashed_messages(with_categories=true) %}
                        {% if messages %}
                        {% for category, message in messages %}
                        <div class="mb-4 rounded-lg p-4 text-sm
                            {% if category == 'success' %} bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200
                            {% elif category == 'danger' %} bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200
                            {% else %} bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200
                            {% endif %}" role="alert">
                            {{ message }}
                        </div>
                        {% endfor %}
                        {% endif %}
                        {% endwith %}

                        <div class="flex flex-wrap justify-between gap-3 mb-6">
                            <div class="flex min-w-72 flex-col gap-2">
                                <h1 class="text-text-light dark:text-text-dark text-3xl font-black leading-tight tracking-tight">Manajemen Data Perikanan</h1>
                                <p class="text-subtle-text-light dark:text-subtle-text-dark text-base font-normal leading-normal">Kelola catatan kapal, harian, bulanan, dan tahunan.</p>
                            </div>
                        </div>

                        <div class="border-b border-subtle-light dark:border-subtle-dark">
                            <div class="flex gap-8">
                                <a class="flex flex-col items-center justify-center border-b-[3px] border-b-primary pb-3 pt-2 text-primary" href="{{ url_for('manajemen_kapal') }}">
                                    <p class="text-sm font-bold leading-normal">Data Kapal</p>
                                </a>
                                <a class="flex flex-col items-center justify-center border-b-[3px] border-b-transparent text-subtle-text-light dark:text-subtle-text-dark pb-3 pt-2 hover:text-primary dark:hover:text-primary" href="{{ url_for('manajemen_harian') }}">
                                    <p class="text-sm font-bold leading-normal">Data Harian</p>
                                </a>
                                <a class="flex flex-col items-center justify-center border-b-[3px] border-b-transparent text-subtle-text-light dark:text-subtle-text-dark pb-3 pt-2 hover:text-primary dark:hover:text-primary" href="{{ url_for('laporan_bulanan') }}">
                                    <p class="text-sm font-bold leading-normal">Data Bulanan</p>
                                </a>
                                <a class="flex flex-col items-center justify-center border-b-[3px] border-b-transparent text-subtle-text-light dark:text-subtle-text-dark pb-3 pt-2 hover:text-primary dark:hover:text-primary" href="{{ url_for('laporan_tahunan') }}">
                                    <p class="text-sm font-bold leading-normal">Data Tahunan</p>
                                </a>
                            </div>
                        </div>

                        <div class="bg-white dark:bg-subtle-dark/50 rounded-b-lg shadow-sm">

                            <div class="flex flex-wrap justify-between items-center gap-3 px-4 py-3 border-b border-subtle-light dark:border-subtle-dark">
                                <div class="flex gap-2">
                                    <input class="h-10 rounded-lg border border-subtle-light dark:border-subtle-dark bg-transparent text-text-light dark:text-text-dark text-sm focus:ring-primary focus:border-primary" placeholder="Cari nama kapal..." type="text" />
                                </div>
                                <button id="openTambahModal" class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 bg-secondary text-white gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-4 hover:bg-secondary/90 transition-colors">
                                    <span class="material-symbols-outlined text-lg" style="font-variation-settings: 'FILL' 1;">add</span>
                                    <span class="truncate">Tambah Kapal Baru</span>
                                </button>
                            </div>

                            <div class="overflow-x-auto">
                                <table class="w-full text-sm text-left text-subtle-text-light dark:text-subtle-text-dark">
                                    <thead class="text-xs text-subtle-text-light dark:text-subtle-text-dark uppercase bg-background-light dark:bg-background-dark/50">
                                        <tr>
                                            <th class="px-6 py-3 font-medium" scope="col">ID</th>
                                            <th class="px-6 py-3 font-medium" scope="col">Nama Kapal</th>
                                            <th class="px-6 py-3 font-medium" scope="col">Jenis Kapal</th>
                                            <th class="px-6 py-3 font-medium" scope="col">Pemilik</th>
                                            <th class="px-6 py-3 font-medium" scope="col">Ukuran (GT)</th>
                                            <th class="px-6 py-3 font-medium" scope="col">Status</th>
                                            <th class="px-6 py-3 font-medium text-right" scope="col">Aksi</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for kapal in data_kapal_list %}
                                        <tr class="bg-white dark:bg-subtle-dark/50 border-b border-subtle-light dark:border-subtle-dark hover:bg-primary/5 dark:hover:bg-primary/10">
                                            <td class="px-6 py-4 font-medium text-text-light dark:text-text-dark whitespace-nowrap">#K{{ kapal.id_kapal }}</td>
                                            <td class="px-6 py-4">{{ kapal.nama_kapal }}</td>
                                            <td class="px-6 py-4">{{ kapal.jenis_kapal }}</td>
                                            <td class="px-6 py-4">{{ kapal.nama_pemilik if kapal.nama_pemilik else '-' }}</td>
                                            <td class="px-6 py-4">{{ kapal.ukuran_kapal_gt if kapal.ukuran_kapal_gt else '-' }} GT</td>
                                            <td class="px-6 py-4">
                                                {% if kapal.status == 'Aktif' %}
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200">Aktif</span>
                                                {% else %}
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200">Tidak Aktif</span>
                                                {% endif %}
                                            </td>
                                            <td class="px-6 py-4 text-right">
                                                <div class="flex justify-end gap-2">
                                                    <button class="openEditModal p-2 rounded-md hover:bg-black/10 dark:hover:bg-white/10" data-id="{{ kapal.id_kapal }}">
                                                        <span class="material-symbols-outlined text-lg">edit</span>
                                                    </button>
                                                    <form action="{{ url_for('hapus_kapal', id_kapal=kapal.id_kapal) }}" method="POST" class="d-inline" onsubmit="return confirm('Anda yakin ingin menghapus kapal ini? Kapal tidak bisa dihapus jika memiliki data tangkapan.');">
                                                        <button type="submit" class="p-2 rounded-md hover:bg-black/10 dark:hover:bg-white/10">
                                                            <span class="material-symbols-outlined text-lg text-red-500">delete</span>
                                                        </button>
                                                    </form>
                                                </div>
                                            </td>
                                        </tr>
                                        {% endfor %}
                                        {% if not data_kapal_list %}
                                        <tr class="bg-white dark:bg-subtle-dark/50 border-b border-subtle-light dark:border-subtle-dark">
                                            <td colspan="7" class="px-6 py-4 text-center">Belum ada data kapal. Silakan tambahkan kapal baru.</td>
                                        </tr>
                                        {% endif %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    </div>

                <footer class="flex flex-col gap-6 px-5 py-10 text-center border-t border-subtle-light dark:border-subtle-dark">
                    <div class="flex flex-wrap items-center justify-center gap-x-8 gap-y-4">
                        <a class="text-subtle-text-light dark:text-subtle-text-dark text-sm font-medium leading-normal min-w-40 hover:text-primary dark:hover:text-secondary transition-colors" href="#">Kontak HIMATASKA</a>
                        <a class="text-subtle-text-light dark:text-subtle-text-dark text-sm font-medium leading-normal min-w-40 hover:text-primary dark:hover:text-secondary transition-colors" href="#">Kebijakan Privasi</a>
                        <a class="text-subtle-text-light dark:text-subtle-text-dark text-sm font-medium leading-normal min-w-40 hover:text-primary dark:hover:text-secondary transition-colors" href="#">Ketentuan Layanan</a>
                    </div>
                    <div class="flex flex-wrap justify-center gap-4">
                        <a aria-label="Email" href="#">
                            <span class="material-symbols-outlined text-subtle-text-light dark:text-subtle-text-dark hover:text-primary dark:hover:text-secondary transition-colors text-xl font-normal fill-0">mail</span>
                        </a>
                        <a aria-label="Telepon" href="#">
                            <span class="material-symbols-outlined text-subtle-text-light dark:text-subtle-text-dark hover:text-primary dark:hover:text-secondary transition-colors text-xl font-normal fill-0">call</span>
                        </a>
                    </div>
                    <p class="text-subtle-text-light dark:text-subtle-text-dark text-sm font-normal leading-normal">Â© 2024 SmartStock. Hak cipta dilindungi.</p>
                </footer>
            </main>
        </div>
    </div>

    <div id="tambahKapalModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm hidden">
        <div class="bg-white dark:bg-background-dark rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center px-6 py-4 border-b border-subtle-light dark:border-subtle-dark">
                <h3 class="text-lg font-bold text-text-light dark:text-text-dark">Tambah Kapal Baru</h3>
                <button id="closeTambahModal" class="p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10">
                    <span class="material-symbols-outlined text-subtle-text-light dark:text-subtle-text-dark">close</span>
                </button>
            </div>
            <form action="{{ url_for('tambah_kapal') }}" method="POST">
                <div class="p-6 grid grid-cols-1 md:grid-cols-2 gap-4">

                    <div class="col-span-1">
                        <label for="nama_kapal" class="block text-sm font-medium text-subtle-text-light dark:text-subtle-text-dark mb-1">Nama Kapal <span class="text-red-500">*</span></label>
                        <input type="text" id="nama_kapal" name="nama_kapal" class="w-full h-10 rounded-lg border border-subtle-light dark:border-subtle-dark bg-transparent text-text-light dark:text-text-dark text-sm focus:ring-primary focus:border-primary" required>
                    </div>

                    <div class="col-span-1">
                        <label for="jenis_kapal" class="block text-sm font-medium text-subtle-text-light dark:text-subtle-text-dark mb-1">Jenis Kapal <span class="text-red-500">*</span></label>
                        <input type="text" id="jenis_kapal" name="jenis_kapal" class="w-full h-10 rounded-lg border border-subtle-light dark:border-subtle-dark bg-transparent text-text-light dark:text-text-dark text-sm focus:ring-primary focus:border-primary" placeholder="Contoh: Purse Seine" required>
                    </div>

                    <div class="col-span-1">
                        <label for="ukuran_kapal_gt" class="block text-sm font-medium text-subtle-text-light dark:text-subtle-text-dark mb-1">Ukuran (GT)</label>
                        <input type="number" id="ukuran_kapal_gt" name="ukuran_kapal_gt" class="w-full h-10 rounded-lg border border-subtle-light dark:border-subtle-dark bg-transparent text-text-light dark:text-text-dark text-sm focus:ring-primary focus:border-primary" placeholder="Opsional">
                    </div>

                    <div class="col-span-1">
                        <label for="status" class="block text-sm font-medium text-subtle-text-light dark:text-subtle-text-dark mb-1">Status <span class="text-red-500">*</span></label>
                        <select id="status" name="status" class="w-full h-10 rounded-lg border border-subtle-light dark:border-subtle-dark bg-transparent text-text-light dark:text-text-dark text-sm focus:ring-primary focus:border-primary" required>
                            <option value="Aktif" selected>Aktif</option>
                            <option value="Tidak Aktif">Tidak Aktif</option>
                        </select>
                    </div>

                    <div class="col-span-1">
                        <label for="nomor_registrasi" class="block text-sm font-medium text-subtle-text-light dark:text-subtle-text-dark mb-1">Nomor Registrasi</label>
                        <input type="text" id="nomor_registrasi" name="nomor_registrasi" class="w-full h-10 rounded-lg border border-subtle-light dark:border-subtle-dark bg-transparent text-text-light dark:text-text-dark text-sm focus:ring-primary focus:border-primary" placeholder="Opsional">
                    </div>

                    <div class="col-span-1">
                        <label for="nama_pemilik" class="block text-sm font-medium text-subtle-text-light dark:text-subtle-text-dark mb-1">Nama Pemilik</label>
                        <input type="text" id="nama_pemilik" name="nama_pemilik" class="w-full h-10 rounded-lg border border-subtle-light dark:border-subtle-dark bg-transparent text-text-light dark:text-text-dark text-sm focus:ring-primary focus:border-primary" placeholder="Opsional">
                    </div>

                    <div class="col-span-2">
                        <label for="pelabuhan_asal" class="block text-sm font-medium text-subtle-text-light dark:text-subtle-text-dark mb-1">Pelabuhan Asal</label>
                        <input type="text" id="pelabuhan_asal" name="pelabuhan_asal" class="w-full h-10 rounded-lg border border-subtle-light dark:border-subtle-dark bg-transparent text-text-light dark:text-text-dark text-sm focus:ring-primary focus:border-primary" placeholder="Opsional">
                    </div>
                </div>

                <div class="px-6 py-4 bg-background-light dark:bg-background-dark/50 border-t border-subtle-light dark:border-subtle-dark flex justify-end gap-3">
                    <button type="button" id="cancelTambahModal" class="h-10 px-4 rounded-lg bg-subtle-light dark:bg-subtle-dark text-text-light dark:text-text-dark text-sm font-bold hover:bg-gray-300 dark:hover:bg-slate-700">Batal</button>
                    <button type="submit" class="h-10 px-4 rounded-lg bg-primary text-white text-sm font-bold hover:bg-primary/90">Simpan Kapal</button>
                </div>
            </form>
        </div>
    </div>

    <div id="editKapalModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm hidden">
        <div class="bg-white dark:bg-background-dark rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center px-6 py-4 border-b border-subtle-light dark:border-subtle-dark">
                <h3 class="text-lg font-bold text-text-light dark:text-text-dark">Edit Data Kapal</h3>
                <button id="closeEditModal" class="p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10">
                    <span class="material-symbols-outlined text-subtle-text-light dark:text-subtle-text-dark">close</span>
                </button>
            </div>
            <form id="editForm" method="POST">
                <div class="p-6 grid grid-cols-1 md:grid-cols-2 gap-4">

                    <div class="col-span-1">
                        <label for="edit_nama_kapal" class="block text-sm font-medium text-subtle-text-light dark:text-subtle-text-dark mb-1">Nama Kapal <span class="text-red-500">*</span></label>
                        <input type="text" id="edit_nama_kapal" name="nama_kapal" class="w-full h-10 rounded-lg border border-subtle-light dark:border-subtle-dark bg-transparent text-text-light dark:text-text-dark text-sm focus:ring-primary focus:border-primary" required>
                    </div>

                    <div class="col-span-1">
                        <label for="edit_jenis_kapal" class="block text-sm font-medium text-subtle-text-light dark:text-subtle-text-dark mb-1">Jenis Kapal <span class="text-red-500">*</span></label>
                        <input type="text" id="edit_jenis_kapal" name="jenis_kapal" class="w-full h-10 rounded-lg border border-subtle-light dark:border-subtle-dark bg-transparent text-text-light dark:text-text-dark text-sm focus:ring-primary focus:border-primary" required>
                    </div>

                    <div class="col-span-1">
                        <label for="edit_ukuran_kapal_gt" class="block text-sm font-medium text-subtle-text-light dark:text-subtle-text-dark mb-1">Ukuran (GT)</label>
                        <input type="number" id="edit_ukuran_kapal_gt" name="ukuran_kapal_gt" class="w-full h-10 rounded-lg border border-subtle-light dark:border-subtle-dark bg-transparent text-text-light dark:text-text-dark text-sm focus:ring-primary focus:border-primary">
                    </div>

                    <div class="col-span-1">
                        <label for="edit_status" class="block text-sm font-medium text-subtle-text-light dark:text-subtle-text-dark mb-1">Status <span class="text-red-500">*</span></label>
                        <select id="edit_status" name="status" class="w-full h-10 rounded-lg border border-subtle-light dark:border-subtle-dark bg-transparent text-text-light dark:text-text-dark text-sm focus:ring-primary focus:border-primary" required>
                            <option value="Aktif">Aktif</option>
                            <option value="Tidak Aktif">Tidak Aktif</option>
                        </select>
                    </div>

                    <div class="col-span-1">
                        <label for="edit_nomor_registrasi" class="block text-sm font-medium text-subtle-text-light dark:text-subtle-text-dark mb-1">Nomor Registrasi</label>
                        <input type="text" id="edit_nomor_registrasi" name="nomor_registrasi" class="w-full h-10 rounded-lg border border-subtle-light dark:border-subtle-dark bg-transparent text-text-light dark:text-text-dark text-sm focus:ring-primary focus:border-primary">
                    </div>

                    <div class="col-span-1">
                        <label for="edit_nama_pemilik" class="block text-sm font-medium text-subtle-text-light dark:text-subtle-text-dark mb-1">Nama Pemilik</label>
                        <input type="text" id="edit_nama_pemilik" name="nama_pemilik" class="w-full h-10 rounded-lg border border-subtle-light dark:border-subtle-dark bg-transparent text-text-light dark:text-text-dark text-sm focus:ring-primary focus:border-primary">
                    </div>

                    <div class="col-span-2">
                        <label for="edit_pelabuhan_asal" class="block text-sm font-medium text-subtle-text-light dark:text-subtle-text-dark mb-1">Pelabuhan Asal</label>
                        <input type="text" id="edit_pelabuhan_asal" name="pelabuhan_asal" class="w-full h-10 rounded-lg border border-subtle-light dark:border-subtle-dark bg-transparent text-text-light dark:text-text-dark text-sm focus:ring-primary focus:border-primary">
                    </div>
                </div>

                <div class="px-6 py-4 bg-background-light dark:bg-background-dark/50 border-t border-subtle-light dark:border-subtle-dark flex justify-end gap-3">
                    <button type="button" id="cancelEditModal" class="h-10 px-4 rounded-lg bg-subtle-light dark:bg-subtle-dark text-text-light dark:text-text-dark text-sm font-bold hover:bg-gray-300 dark:hover:bg-slate-700">Batal</button>
                    <button type="submit" class="h-10 px-4 rounded-lg bg-primary text-white text-sm font-bold hover:bg-primary/90">Simpan Perubahan</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Modal Tambah
        const tambahModal = document.getElementById('tambahKapalModal');
        const openTambahModal = document.getElementById('openTambahModal');
        const closeTambahModal = document.getElementById('closeTambahModal');
        const cancelTambahModal = document.getElementById('cancelTambahModal');

        openTambahModal.addEventListener('click', () => tambahModal.classList.remove('hidden'));
        closeTambahModal.addEventListener('click', () => tambahModal.classList.add('hidden'));
        cancelTambahModal.addEventListener('click', () => tambahModal.classList.add('hidden'));

        // Modal Edit
        const editModal = document.getElementById('editKapalModal');
        const closeEditModal = document.getElementById('closeEditModal');
        const cancelEditModal = document.getElementById('cancelEditModal');
        const editForm = document.getElementById('editForm');

        closeEditModal.addEventListener('click', () => editModal.classList.add('hidden'));
        cancelEditModal.addEventListener('click', () => editModal.classList.add('hidden'));

        // Buat "kamus" data dari Jinja
        const dataKapalMap = {
            {% for kapal in data_kapal_list %}
            "{{ kapal.id_kapal }}": {
                "id": "{{ kapal.id_kapal }}",
                "nama_kapal": "{{ kapal.nama_kapal }}",
                "jenis_kapal": "{{ kapal.jenis_kapal }}",
                "ukuran_kapal_gt": "{{ kapal.ukuran_kapal_gt if kapal.ukuran_kapal_gt else '' }}",
                "nomor_registrasi": "{{ kapal.nomor_registrasi if kapal.nomor_registrasi else '' }}",
                "nama_pemilik": "{{ kapal.nama_pemilik if kapal.nama_pemilik else '' }}",
                "pelabuhan_asal": "{{ kapal.pelabuhan_asal if kapal.pelabuhan_asal else '' }}",
                "status": "{{ kapal.status }}"
            }
            {% if not loop.last %},{% endif %}
            {% endfor %}
        };

        // Tambahkan event listener ke semua tombol edit
        const editButtons = document.querySelectorAll('.openEditModal');
        editButtons.forEach(button => {
            button.addEventListener('click', () => {
                const kapalId = button.getAttribute('data-id');
                const data = dataKapalMap[kapalId];

                if (data) {
                    // Set action URL formulir
                    editForm.action = `/manajemen_kapal/edit/${data.id}`;

                    // Isi formulir
                    document.getElementById('edit_nama_kapal').value = data.nama_kapal;
                    document.getElementById('edit_jenis_kapal').value = data.jenis_kapal;
                    document.getElementById('edit_ukuran_kapal_gt').value = data.ukuran_kapal_gt;
                    document.getElementById('edit_status').value = data.status;
                    document.getElementById('edit_nomor_registrasi').value = data.nomor_registrasi;
                    document.getElementById('edit_nama_pemilik').value = data.nama_pemilik;
                    document.getElementById('edit_pelabuhan_asal').value = data.pelabuhan_asal;

                    // Tampilkan modal
                    editModal.classList.remove('hidden');
                }
            });
        });
    </script>
</body>
</html>